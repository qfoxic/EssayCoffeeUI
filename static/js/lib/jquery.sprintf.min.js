jQuery.vsprintf=function(c,f){function n(c,b,a){if(void 0==b)return"s"==c?"":"0";var e,d="",f="",g=" ";if(a["short"]||a["long"]||a.long_long)switch(c){case "e":case "f":case "G":case "E":case "G":case "d":a["short"]?32767<=b?b=32767:-32768>=b&&(b=-32768):a["long"]?2147483647<=b?b=2147483647:-2147483648>=b&&(b=-2147483648):9223372036854775E3<=b?b=9223372036854775E3:b<=-9223372036854775E3-1&&(b=-9223372036854775E3-1);break;case "X":case "B":case "u":case "o":case "x":case "b":0>b&&(b=Math.abs(b)-1),
a["short"]?65535<=b&&(b=65535):a["long"]?4294967295<=b&&(b=4294967295):1.8446744073709552E19<=b&&(b=1.8446744073709552E19)}switch(c){case "c":e=String.fromCharCode(parseInt(b));break;case "s":e=b.toString();break;case "d":e=(new Number(parseInt(b))).toString();break;case "u":e=(new Number(parseInt(b))).toString();break;case "o":e=(new Number(parseInt(b))).toString(8);break;case "x":e=(new Number(parseInt(b))).toString(16);break;case "B":case "b":e=(new Number(parseInt(b))).toString(2);break;case "e":e=
a.precision?a.precision:6;e=(new Number(b)).toExponential(e).toString();break;case "f":e=a.precision?a.precision:6;e=(new Number(b)).toFixed(e).toString();break;case "g":e=a.precision?a.precision:6;e=(new Number(b)).toPrecision(e).toString();break;case "X":e=(new Number(parseInt(b))).toString(16).toUpperCase();break;case "E":e=a.precision?a.precision:6;e=(new Number(b)).toExponential(e).toString().toUpperCase();break;case "G":e=a.precision?a.precision:6,e=(new Number(b)).toPrecision(e).toString().toUpperCase()}a["+"]&&
(0<parseFloat(b)&&-1!="defgEG".split("").indexOf(c))&&(d="+");a[" "]&&(0<parseFloat(b)&&-1!="defgEG".split("").indexOf(c))&&(d=" ");if(a["#"]&&0!=parseInt(b))switch(c){case "o":d="0";break;case "x":case "X":d="0x";break;case "b":d="0b";break;case "B":d="0B"}a["0"]&&!a["-"]&&(g="0");if(a.width&&a.width>e.length+d.length){c=a.width-e.length-d.length;for(b=0;b<c;++b)f+=g}e=a["-"]&&!a["0"]?e+f:f+e;return d+e}if(null==c)throw"Not enough arguments for vsprintf";null==f&&(f=[]);for(var k="",s=0,d=0,a={"long":!1,
"short":!1,long_long:!1},t=!1,m=!1,l=!1,p=!1,i=!1,q=!1,r=".",g=0;g<c.length;++g){var h=c.charAt(g);if(t){switch(h){case "i":h="d";break;case "D":a["long"]=!0;h="d";break;case "U":a["long"]=!0;h="u";break;case "O":a["long"]=!0;h="o";break;case "F":h="f"}switch(h){case "c":case "s":case "d":case "u":case "o":case "x":case "e":case "f":case "g":case "X":case "E":case "G":case "b":case "B":d=f[d];if(i){i=d;if(d instanceof Array)i=d;else if("string"==typeof d||d instanceof String)i=d.split("").map(function(a){return a.charCodeAt()});
else if(("number"==typeof d||d instanceof Number)&&a.bitwidth){i=[];do i.unshift(d&~(-1<<a.bitwidth));while(d>>>=a.bitwidth)}else i=d.toString().split("").map(function(a){return a.charCodeAt()});k+=i.map(function(c){return n(h,c,a)}).join(r)}else k+=n(h,d,a);p||++s;d=s;a={};q=i=p=l=t=m=!1;r=".";break;case "v":i=!0;break;case " ":case "0":case "-":case "+":case "#":a[h]=!0;break;case "*":m=!0;break;case ".":l=!0;break;case "@":q=!0;break;case "l":a["long"]?(a.long_long=!0,a["long"]=!1):(a["long"]=
!0,a.long_long=!1);a["short"]=!1;break;case "q":case "L":a.long_long=!0;a["long"]=!1;a["short"]=!1;break;case "h":a["short"]=!0,a["long"]=!1,a.long_long=!1}if(/\d/.test(h)){var j=parseInt(c.substr(g)),g=g+(j.toString().length-1);if("$"==c.charAt(g+1)){if(0>j||j>f.length)throw"out of bound";m?(l?(a.precision=f[j-1],l=!1):"v"==c.charAt(g+2)?r=f[j-1]:a.width=f[j-1],m=!1):(p=!0,d=j-1);++g}else l?(a.precision=j,l=!1):q?(a.bitwidth=j,q=!1):a.width=j}else m&&!/\d/.test(c.charAt(g+1))&&(l?(a.precision=f[d],
l=!1):"v"==c.charAt(g+1)?r=f[d]:a.width=f[d],++s,p||d++,m=!1)}else"%"==h?"%"==c.charAt(g+1)?(k+="%",++g):t=!0:k+=h}return k};jQuery.sprintf=function(){if(0==arguments.length)throw"Not enough arguments for sprintf";var c=Array.prototype.slice.call(arguments),f=c.shift();return jQuery.vsprintf(f,c)};jQuery.fn.printf=function(){if(0==arguments.length)throw"Not enough arguments for sprintf";var c=Array.prototype.slice.call(arguments),f=c.shift();return this.append(jQuery.vsprintf(f,c))};
jQuery.fn.vprintf=function(c,f){if(0==arguments.length)throw"Not enough arguments for sprintf";return this.append(jQuery.vsprintf(c,f))};jQuery.fn.vformat=function(c){if(0==arguments.length)throw"Not enough arguments for sprintf";return this.each(function(){self=jQuery(this);self.html(jQuery.vsprintf(self.html(),c))})};
jQuery.fn.format=function(){if(0==arguments.length)throw"Not enough arguments for sprintf";var c=Array.prototype.slice.call(arguments);return this.each(function(){self=jQuery(this);self.html(jQuery.vsprintf(self.html(),c))})};jQuery.printf=function(){if(0==arguments.length)throw"Not enough arguments for sprintf";var c=Array.prototype.slice.call(arguments),f=c.shift(),c=jQuery.vsprintf(f,c);window.console?window.console.info(c):window.dump(c)};
jQuery.vprintf=function(c,f){if(0==arguments.length)throw"Not enough arguments for sprintf";var n=jQuery.vsprintf(c,f);window.console?window.console.info(n):window.dump(n)};
